-- Weekly AI Tools Rankings Database Population
-- Based on Senior PM/Engineer AI Tools Report (August 2024 - August 2025)

-- Week 1: August 5, 2024 (Monday)
INSERT INTO weekly_rankings (id, week_of, rank, tool_name, category, activity, created_at) VALUES
('550e8400-e29b-41d4-a716-446655440001', '2024-08-05', 1, 'Cursor', 'Code & Development', 'Set up AI-first development environment, testing Composer mode for full-file generation', '2024-08-05 10:30:00'),
('550e8400-e29b-41d4-a716-446655440002', '2024-08-05', 2, 'GitHub Copilot Chat', 'Code & Development', 'Updated to GPT-4 version, significantly improved debugging workflows for legacy codebase', '2024-08-05 10:30:00'),
('550e8400-e29b-41d4-a716-446655440003', '2024-08-05', 3, 'Midjourney v6', 'Image Generation', 'Created design mockups for new product features, reaching photorealistic quality for presentations', '2024-08-05 10:30:00'),
('550e8400-e29b-41d4-a716-446655440004', '2024-08-05', 4, 'Perplexity Pro', 'Research & Analysis', 'Conducted competitive analysis with real-time search and citations for market research', '2024-08-05 10:30:00'),
('550e8400-e29b-41d4-a716-446655440005', '2024-08-05', 5, 'Continue.dev', 'Code & Development', 'Explored open-source AI coding assistant as potential Copilot alternative for team', '2024-08-05 10:30:00');

-- Week 2: August 12, 2024
INSERT INTO weekly_rankings (id, week_of, rank, tool_name, category, activity, created_at) VALUES
('550e8400-e29b-41d4-a716-446655440006', '2024-08-12', 1, 'Cursor', 'Code & Development', 'Composer mode generating complete React components, revolutionizing prototyping speed', '2024-08-12 14:15:00'),
('550e8400-e29b-41d4-a716-446655440007', '2024-08-12', 2, 'Continue.dev', 'Code & Development', 'Integrated with VS Code, testing privacy-focused AI assistance for sensitive projects', '2024-08-12 14:15:00'),
('550e8400-e29b-41d4-a716-446655440008', '2024-08-12', 3, 'Aider', 'Code & Development', 'Command-line AI coding for terminal workflows, excellent for git integration and commits', '2024-08-12 14:15:00'),
('550e8400-e29b-41d4-a716-446655440009', '2024-08-12', 4, 'Claude 3.5 Sonnet', 'Code & Writing', 'Complex code analysis and technical documentation, superior reasoning for architecture decisions', '2024-08-12 14:15:00'),
('550e8400-e29b-41d4-a716-446655440010', '2024-08-12', 5, 'v0 by Vercel', 'Code & Development', 'React component generation becoming standard for rapid UI prototyping and iteration', '2024-08-12 14:15:00');

-- Week 3: August 19, 2024
INSERT INTO weekly_rankings (id, week_of, rank, tool_name, category, activity, created_at) VALUES
('550e8400-e29b-41d4-a716-446655440011', '2024-08-19', 1, 'Zapier AI', 'Automation & Workflow', 'Enhanced automation workflows with AI-powered trigger suggestions for product operations', '2024-08-19 09:45:00'),
('550e8400-e29b-41d4-a716-446655440012', '2024-08-19', 2, 'Make.com', 'Automation & Workflow', 'Visual automation platform with AI scenario building for complex product workflows', '2024-08-19 09:45:00'),
('550e8400-e29b-41d4-a716-446655440013', '2024-08-19', 3, 'Cursor', 'Code & Development', 'Multi-file context improvements helping with large codebase refactoring projects', '2024-08-19 09:45:00'),
('550e8400-e29b-41d4-a716-446655440014', '2024-08-19', 4, 'ChatPRD', 'Product Management', 'AI copilot for rapid PRD creation, transforming requirements documentation workflow', '2024-08-19 09:45:00'),
('550e8400-e29b-41d4-a716-446655440015', '2024-08-19', 5, 'Retool AI', 'Development Tools', 'AI components for internal tool creation, building product analytics dashboards', '2024-08-19 09:45:00');

-- Week 4: August 26, 2024
INSERT INTO weekly_rankings (id, week_of, rank, tool_name, category, activity, created_at) VALUES
('550e8400-e29b-41d4-a716-446655440016', '2024-08-26', 1, 'ChatPRD', 'Product Management', 'Rapid PRD creation from ideas, transforming product documentation from hours to minutes', '2024-08-26 16:20:00'),
('550e8400-e29b-41d4-a716-446655440017', '2024-08-26', 2, 'Airtable AI', 'Data & Analysis', 'Formula and automation suggestions for complex product roadmap management and tracking', '2024-08-26 16:20:00'),
('550e8400-e29b-41d4-a716-446655440018', '2024-08-26', 3, 'Cursor', 'Code & Development', 'Tab completion and composer working together for seamless full-stack development', '2024-08-26 16:20:00'),
('550e8400-e29b-41d4-a716-446655440019', '2024-08-26', 4, 'Notion AI', 'Product Management', 'Enhanced document generation and project planning templates for product team collaboration', '2024-08-26 16:20:00'),
('550e8400-e29b-41d4-a716-446655440020', '2024-08-26', 5, 'v0', 'Code & Development', 'React component generation quality improving, becoming standard for prototyping', '2024-08-26 16:20:00');

-- Week 5: September 2, 2024
INSERT INTO weekly_rankings (id, week_of, rank, tool_name, category, activity, created_at) VALUES
('550e8400-e29b-41d4-a716-446655440021', '2024-09-02', 1, 'NotebookLM', 'Research & Analysis', 'Google research assistant for competitive analysis and market research synthesis', '2024-09-02 11:10:00'),
('550e8400-e29b-41d4-a716-446655440022', '2024-09-02', 2, 'Linear AI', 'Product Management', 'AI-powered issue prioritization and sprint planning for product development workflows', '2024-09-02 11:10:00'),
('550e8400-e29b-41d4-a716-446655440023', '2024-09-02', 3, 'Cursor', 'Code & Development', 'AI-driven refactoring capabilities saving hours on legacy codebase cleanup', '2024-09-02 11:10:00'),
('550e8400-e29b-41d4-a716-446655440024', '2024-09-02', 4, 'Notion AI', 'Product Management', 'Enhanced document generation for product specs and team project planning', '2024-09-02 11:10:00'),
('550e8400-e29b-41d4-a716-446655440025', '2024-09-02', 5, 'Figma AI', 'Design & Prototyping', 'Early AI design assistance features for rapid prototyping and design iteration', '2024-09-02 11:10:00');

-- Week 6: September 9, 2024 (AUDIO REVOLUTION)
INSERT INTO weekly_rankings (id, week_of, rank, tool_name, category, activity, created_at) VALUES
('550e8400-e29b-41d4-a716-446655440026', '2024-09-09', 1, 'NotebookLM Audio Overview', 'Research & Analysis', 'Revolutionary podcast generation from documents, went viral for transforming research consumption', '2024-09-09 08:30:00'),
('550e8400-e29b-41d4-a716-446655440027', '2024-09-09', 2, 'Windsurf IDE', 'Code & Development', 'Codeium AI-native IDE entering beta, compelling alternative to Cursor for development', '2024-09-09 08:30:00'),
('550e8400-e29b-41d4-a716-446655440028', '2024-09-09', 3, 'Cursor', 'Code & Development', 'Composer Agent handling complex multi-file edits seamlessly across large projects', '2024-09-09 08:30:00'),
('550e8400-e29b-41d4-a716-446655440029', '2024-09-09', 4, 'GPT-4o Voice Mode', 'Communication', 'Advanced voice interaction for brainstorming sessions and requirements gathering', '2024-09-09 08:30:00'),
('550e8400-e29b-41d4-a716-446655440030', '2024-09-09', 5, 'Miro AI', 'Design & Collaboration', 'AI-powered whiteboarding and brainstorming tools for product team collaboration', '2024-09-09 08:30:00');

-- Week 7: September 16, 2024
INSERT INTO weekly_rankings (id, week_of, rank, tool_name, category, activity, created_at) VALUES
('550e8400-e29b-41d4-a716-446655440031', '2024-09-16', 1, 'Bolt.new', 'Full-Stack Development', 'StackBlitz full-stack AI platform, generating applications from natural language prompts', '2024-09-16 13:45:00'),
('550e8400-e29b-41d4-a716-446655440032', '2024-09-16', 2, 'Lovable', 'Full-Stack Development', 'AI-powered web app creation with superior design quality, rapid user adoption', '2024-09-16 13:45:00'),
('550e8400-e29b-41d4-a716-446655440033', '2024-09-16', 3, 'Replit Agent', 'Code & Development', 'Enhanced Ghostwriter capabilities for autonomous application creation and deployment', '2024-09-16 13:45:00'),
('550e8400-e29b-41d4-a716-446655440034', '2024-09-16', 4, 'ChatPRD', 'Product Management', 'User story generation and feature specification for product requirements documentation', '2024-09-16 13:45:00'),
('550e8400-e29b-41d4-a716-446655440035', '2024-09-16', 5, 'Devin AI', 'AI Agents', 'Early preview of autonomous AI engineer capabilities from Cognition Labs', '2024-09-16 13:45:00');

-- Week 8: September 23, 2024 (VIRAL NOTEBOOKLM)
INSERT INTO weekly_rankings (id, week_of, rank, tool_name, category, activity, created_at) VALUES
('550e8400-e29b-41d4-a716-446655440036', '2024-09-23', 1, 'NotebookLM', 'Research & Analysis', 'Audio Overview going mega-viral on X, creative experiments with document analysis', '2024-09-23 10:20:00'),
('550e8400-e29b-41d4-a716-446655440037', '2024-09-23', 2, 'Cursor', 'Code & Development', 'Multi-model routing between GPT-4 and Claude for different coding tasks and contexts', '2024-09-23 10:20:00'),
('550e8400-e29b-41d4-a716-446655440038', '2024-09-23', 3, 'Claude 3.5 Sonnet', 'Code & Writing', 'Artifacts feature enabling rapid prototype generation and iterative development', '2024-09-23 10:20:00'),
('550e8400-e29b-41d4-a716-446655440039', '2024-09-23', 4, 'Perplexity Pro', 'Research & Analysis', 'Real-time data access crucial for market intelligence and competitive analysis', '2024-09-23 10:20:00'),
('550e8400-e29b-41d4-a716-446655440040', '2024-09-23', 5, 'Midjourney v6', 'Image Generation', 'Describe feature helping iterate on visual concepts for product presentations', '2024-09-23 10:20:00');

-- Week 9: September 30, 2024
INSERT INTO weekly_rankings (id, week_of, rank, tool_name, category, activity, created_at) VALUES
('550e8400-e29b-41d4-a716-446655440041', '2024-09-30', 1, 'Bolt.new', 'Full-Stack Development', 'StackBlitz full-stack AI development platform gaining serious enterprise traction', '2024-09-30 15:00:00'),
('550e8400-e29b-41d4-a716-446655440042', '2024-09-30', 2, 'Cursor', 'Code & Development', 'Codebase-wide understanding reaching new levels with enhanced multi-file context', '2024-09-30 15:00:00'),
('550e8400-e29b-41d4-a716-446655440043', '2024-09-30', 3, 'NotebookLM', 'Research & Analysis', 'Customizable Audio Overviews allowing users to guide conversation focus and topics', '2024-09-30 15:00:00'),
('550e8400-e29b-41d4-a716-446655440044', '2024-09-30', 4, 'Windsurf IDE', 'Code & Development', 'Codeium AI-native development environment entering public beta with strong features', '2024-09-30 15:00:00'),
('550e8400-e29b-41d4-a716-446655440045', '2024-09-30', 5, 'GitHub Copilot Workspace', 'Code & Development', 'Early preview of repository-wide AI assistance for large-scale development', '2024-09-30 15:00:00');

-- Week 10: October 7, 2024
INSERT INTO weekly_rankings (id, week_of, rank, tool_name, category, activity, created_at) VALUES
('550e8400-e29b-41d4-a716-446655440046', '2024-10-07', 1, 'Cursor', 'Code & Development', 'Team collaboration features making it viable for larger engineering organizations', '2024-10-07 12:30:00'),
('550e8400-e29b-41d4-a716-446655440047', '2024-10-07', 2, 'GitHub Copilot Enterprise', 'Code & Development', 'Repository knowledge becoming sophisticated with enhanced team analytics', '2024-10-07 12:30:00'),
('550e8400-e29b-41d4-a716-446655440048', '2024-10-07', 3, 'Replit', 'Full-Stack Development', 'Valued at $1.16B, full-stack power with built-in databases and authentication', '2024-10-07 12:30:00'),
('550e8400-e29b-41d4-a716-446655440049', '2024-10-07', 4, 'NotebookLM Business', 'Research & Analysis', 'Business version via Google Workspace with enhanced enterprise features', '2024-10-07 12:30:00'),
('550e8400-e29b-41d4-a716-446655440050', '2024-10-07', 5, 'Claude 3.5 Sonnet', 'Code & Writing', 'Computer Use capabilities improving but still in experimental development phase', '2024-10-07 12:30:00');

-- Week 11: October 14, 2024 (COMPUTER USE LAUNCH)
INSERT INTO weekly_rankings (id, week_of, rank, tool_name, category, activity, created_at) VALUES
('550e8400-e29b-41d4-a716-446655440051', '2024-10-14', 1, 'Claude 3.5 Sonnet Computer Use', 'AI Agents', 'MAJOR LAUNCH: Computer use capability in public beta, first mainstream UI automation', '2024-10-14 09:15:00'),
('550e8400-e29b-41d4-a716-446655440052', '2024-10-14', 2, 'ChatGPT o1-preview', 'Code & Analysis', 'Step-by-step reasoning for complex technical problems and architecture decisions', '2024-10-14 09:15:00'),
('550e8400-e29b-41d4-a716-446655440053', '2024-10-14', 3, 'Cursor', 'Code & Development', 'Supporting o1 models for enhanced architectural decision-making and planning', '2024-10-14 09:15:00'),
('550e8400-e29b-41d4-a716-446655440054', '2024-10-14', 4, 'Bolt.new', 'Full-Stack Development', 'Real-time preview capabilities significantly improving iteration speed for development', '2024-10-14 09:15:00'),
('550e8400-e29b-41d4-a716-446655440055', '2024-10-14', 5, 'Slack AI', 'Communication', 'Enhanced thread summarization and action item extraction for engineering teams', '2024-10-14 09:15:00');

-- Week 12: October 21, 2024
INSERT INTO weekly_rankings (id, week_of, rank, tool_name, category, activity, created_at) VALUES
('550e8400-e29b-41d4-a716-446655440056', '2024-10-21', 1, 'Claude 3.5 Sonnet Computer Use', 'AI Agents', 'Public beta showing real UI automation potential for testing and workflow automation', '2024-10-21 14:45:00'),
('550e8400-e29b-41d4-a716-446655440057', '2024-10-21', 2, 'GitHub Copilot Enterprise', 'Code & Development', 'Repository-wide understanding and team analytics gaining serious enterprise adoption', '2024-10-21 14:45:00'),
('550e8400-e29b-41d4-a716-446655440058', '2024-10-21', 3, 'Cursor', 'Code & Development', 'Multi-model routing and enterprise security features for larger development teams', '2024-10-21 14:45:00'),
('550e8400-e29b-41d4-a716-446655440059', '2024-10-21', 4, 'ChatPRD', 'Product Management', 'Enhanced templates and team collaboration features for product documentation workflows', '2024-10-21 14:45:00'),
('550e8400-e29b-41d4-a716-446655440060', '2024-10-21', 5, 'Retool AI', 'Development Tools', 'AI-powered internal tool creation essential for product operations dashboards', '2024-10-21 14:45:00');

-- Continue with more weeks... (showing pattern for remaining weeks)

-- Week 18: December 2, 2024 (SORA LAUNCH)
INSERT INTO weekly_rankings (id, week_of, rank, tool_name, category, activity, created_at) VALUES
('550e8400-e29b-41d4-a716-446655440096', '2024-12-02', 1, 'Sora', 'Video Generation', 'MAJOR LAUNCH: OpenAI text-to-video model generating high-definition videos for demos', '2024-12-02 10:00:00'),
('550e8400-e29b-41d4-a716-446655440097', '2024-12-02', 2, 'Cursor', 'Code & Development', 'Enhanced debugging with context-aware error analysis and autonomous resolution', '2024-12-02 10:00:00'),
('550e8400-e29b-41d4-a716-446655440098', '2024-12-02', 3, 'Claude 3.5 Sonnet', 'Code & Writing', 'Improved reasoning capabilities for complex product decisions and architecture', '2024-12-02 10:00:00'),
('550e8400-e29b-41d4-a716-446655440099', '2024-12-02', 4, 'NotebookLM', 'Research & Analysis', 'Enhanced audio customization and team collaboration features for research workflows', '2024-12-02 10:00:00'),
('550e8400-e29b-41d4-a716-446655440100', '2024-12-02', 5, 'Midjourney v7', 'Image Generation', 'Photorealistic product mockups and lifestyle imagery for marketing materials', '2024-12-02 10:00:00');

-- Week 20: December 16, 2024 (CURSOR PRODUCT OF THE YEAR)
INSERT INTO weekly_rankings (id, week_of, rank, tool_name, category, activity, created_at) VALUES
('550e8400-e29b-41d4-a716-446655440106', '2024-12-16', 1, 'Cursor', 'Code & Development', 'WINNER: Named 2024 Product of the Year by Product Hunt Golden Kitty Awards', '2024-12-16 16:30:00'),
('550e8400-e29b-41d4-a716-446655440107', '2024-12-16', 2, 'Sora', 'Video Generation', 'Integration with DALL-E 3 recaptioning for more faithful prompt following', '2024-12-16 16:30:00'),
('550e8400-e29b-41d4-a716-446655440108', '2024-12-16', 3, 'Replit', 'Full-Stack Development', 'Full-stack development environment reaching new levels of maturity', '2024-12-16 16:30:00'),
('550e8400-e29b-41d4-a716-446655440109', '2024-12-16', 4, 'v0', 'Code & Development', 'Clean, well-structured code generation ready for production projects', '2024-12-16 16:30:00'),
('550e8400-e29b-41d4-a716-446655440110', '2024-12-16', 5, 'Claude 3.5 Sonnet', 'AI Agents', 'Computer Use capabilities becoming increasingly reliable for automation', '2024-12-16 16:30:00');

-- Week 40: May 5, 2025 (CLAUDE 4 LAUNCH)
INSERT INTO weekly_rankings (id, week_of, rank, tool_name, category, activity, created_at) VALUES
('550e8400-e29b-41d4-a716-446655440196', '2025-05-05', 1, 'Claude 4 Opus', 'AI Agents', 'MAJOR LAUNCH: Best coding model in the world with 7-hour autonomous operation capability', '2025-05-05 11:00:00'),
('550e8400-e29b-41d4-a716-446655440197', '2025-05-05', 2, 'Claude 4 Sonnet', 'Code & Development', 'Significant upgrade with superior coding, reasoning, and enhanced steerability', '2025-05-05 11:00:00'),
('550e8400-e29b-41d4-a716-446655440198', '2025-05-05', 3, 'Cursor', 'Code & Development', 'Integration with Claude 4 models for complex system design and architecture planning', '2025-05-05 11:00:00'),
('550e8400-e29b-41d4-a716-446655440199', '2025-05-05', 4, 'GitHub Copilot', 'Code & Development', 'Enhanced with Claude 4 Sonnet integration for autonomous coding workflows', '2025-05-05 11:00:00'),
('550e8400-e29b-41d4-a716-446655440200', '2025-05-05', 5, 'Replit', 'Full-Stack Development', 'Advanced algorithm optimization leveraging Claude 4 reasoning capabilities', '2025-05-05 11:00:00');

-- Final Week: August 4, 2025
INSERT INTO weekly_rankings (id, week_of, rank, tool_name, category, activity, created_at) VALUES
('550e8400-e29b-41d4-a716-446655440256', '2025-08-04', 1, 'Claude Code', 'Code & Development', 'Transformed my development workflow - terminal-native AI that understands entire codebase', '2025-08-04 17:00:00'),
('550e8400-e29b-41d4-a716-446655440257', '2025-08-04', 2, 'Replit', 'Full-Stack Development', 'Democratizing sophisticated development capabilities, excellent for rapid prototyping and deployment', '2025-08-04 17:00:00'),
('550e8400-e29b-41d4-a716-446655440258', '2025-08-04', 3, 'ChatGPT', 'AI Assistant', 'Essential reasoning partner for complex architecture decisions and strategic planning', '2025-08-04 17:00:00'),
('550e8400-e29b-41d4-a716-446655440259', '2025-08-04', 4, 'Cursor', 'Code & Development', 'Perfect complement to Claude Code for visual editing and IDE-specific development tasks', '2025-08-04 17:00:00'),
('550e8400-e29b-41d4-a716-446655440260', '2025-08-04', 5, 'GitHub Copilot', 'Code & Development', 'Enterprise standard for team collaboration, excellent integration with existing workflows', '2025-08-04 17:00:00');

-- Update the engineering/PM use case summary to reflect tools vs models
UPDATE weekly_rankings SET category = 'AI Assistant' WHERE tool_name IN ('ChatGPT', 'Claude 3.5 Sonnet', 'Claude 3.7 Sonnet', 'Claude 4 Opus', 'Claude 4 Sonnet');

-- Query to verify ChatGPT appears in top 3 for last 10 weeks
-- SELECT week_of, rank, tool_name, activity FROM weekly_rankings 
-- WHERE tool_name = 'ChatGPT' AND week_of >= '2025-05-26' 
-- ORDER BY week_of;

-- Add more realistic tool lifecycle patterns throughout the year:

-- Week 6: September 9, 2024 (NotebookLM viral peak)
UPDATE weekly_rankings SET 
activity = 'VIRAL MOMENT: Revolutionary podcast generation from documents, peak hype and experimentation'
WHERE week_of = '2024-09-09' AND tool_name = 'NotebookLM Audio Overview';

-- Week 16: November 18, 2024 (NotebookLM declining from peak)
UPDATE weekly_rankings SET 
rank = 4,
activity = 'Utility settling in - still useful for research but novelty worn off, using less frequently'
WHERE week_of = '2024-11-18' AND tool_name = 'NotebookLM';

-- Week 28: February 10, 2025 (NotebookLM absent - other tools took priority)
UPDATE weekly_rankings SET 
tool_name = 'Retool AI',
category = 'Development Tools', 
activity = 'Internal dashboard creation taking priority over research tools'
WHERE week_of = '2025-02-10' AND rank = 5;

-- Week 38: April 21, 2025 (NotebookLM comeback for specific project)
UPDATE weekly_rankings SET 
rank = 3,
tool_name = 'NotebookLM',
category = 'Research & Analysis',
activity = 'Back in rotation - needed for major competitive analysis project, audio overviews still unmatched'
WHERE week_of = '2025-04-21';

-- Show v0 rising and falling pattern
-- Week 4: August 26, 2024 (v0 early adoption)
UPDATE weekly_rankings SET 
activity = 'Component generation quality improving, becoming standard for React prototyping workflows'
WHERE week_of = '2024-08-26' AND tool_name = 'v0';

-- Week 18: December 2, 2024 (v0 peak utility)  
UPDATE weekly_rankings SET
rank = 2,
activity = 'Peak efficiency - generating production-ready components, essential for rapid UI development'
WHERE week_of = '2024-12-02' AND tool_name = 'v0';

-- Week 32: March 10, 2025 (v0 declining - other tools more important)
UPDATE weekly_rankings SET
rank = 5,
tool_name = 'v0',
category = 'Code & Development', 
activity = 'Still useful but other tools taking priority - using less for new projects'
WHERE week_of = '2025-03-10';

-- Week 42: May 19, 2025 (v0 mostly absent)
UPDATE weekly_rankings SET
tool_name = 'Zapier AI',
category = 'Automation & Workflow',
activity = 'Automation taking priority over component generation as projects mature'
WHERE week_of = '2025-05-19' AND rank = 5;

-- Show Lovable's meteoric rise and fall
-- Week 7: September 16, 2024 (Lovable initial excitement)
UPDATE weekly_rankings SET 
activity = 'AI-powered web app creation with superior design quality, incredible early potential'
WHERE week_of = '2024-09-16' AND tool_name = 'Lovable';

-- Week 14: November 4, 2024 (Lovable peak - $17M ARR)
UPDATE weekly_rankings SET
rank = 1,
activity = 'Peak adoption - $17M ARR in 3 months, best tool for rapid full-stack prototyping'
WHERE week_of = '2024-11-04' AND tool_name = 'Lovable';

-- Week 22: December 30, 2024 (Lovable starting to decline)
UPDATE weekly_rankings SET
rank = 4,
activity = 'Still good but limitations showing - Cursor and other tools proving more versatile'
WHERE week_of = '2024-12-30' AND tool_name = 'Lovable';

-- Week 26: January 27, 2025 (Lovable absent - fell out of top 5)
UPDATE weekly_rankings SET
tool_name = 'Linear AI',
category = 'Product Management',
activity = 'Project management AI features becoming more important than rapid prototyping'
WHERE week_of = '2025-01-27' AND rank = 5;

-- Add indexes for better query performance
CREATE INDEX IF NOT EXISTS idx_weekly_rankings_week_of ON weekly_rankings(week_of);
CREATE INDEX IF NOT EXISTS idx_weekly_rankings_tool_name ON weekly_rankings(tool_name);
CREATE INDEX IF NOT EXISTS idx_weekly_rankings_category ON weekly_rankings(category);
CREATE INDEX IF NOT EXISTS idx_weekly_rankings_rank ON weekly_rankings(rank);

-- Queries to analyze tool lifecycle patterns:

-- Tool popularity over time:
-- SELECT tool_name, COUNT(*) as total_appearances, 
--        MIN(week_of) as first_appearance, 
--        MAX(week_of) as last_appearance,
--        ROUND(AVG(rank), 1) as avg_rank
-- FROM weekly_rankings 
-- GROUP BY tool_name 
-- ORDER BY total_appearances DESC;

-- Tools that disappeared and came back:
-- WITH tool_gaps AS (
--   SELECT tool_name, week_of, 
--          LAG(week_of) OVER (PARTITION BY tool_name ORDER BY week_of) as prev_week,
--          LEAD(week_of) OVER (PARTITION BY tool_name ORDER BY week_of) as next_week
--   FROM weekly_rankings
-- )
-- SELECT tool_name, prev_week as disappeared_after, next_week as returned_on
-- FROM tool_gaps 
-- WHERE prev_week IS NOT NULL AND next_week IS NOT NULL
--   AND julianday(next_week) - julianday(prev_week) > 30; -- Gaps longer than 30 days

-- Peak rankings for each tool:
-- SELECT tool_name, MIN(rank) as peak_rank, week_of as peak_week, activity
-- FROM weekly_rankings
-- GROUP BY tool_name
-- ORDER BY peak_rank, tool_name;

-- Tools by category evolution:
-- SELECT category, week_of, COUNT(*) as tools_in_category
-- FROM weekly_rankings 
-- GROUP BY category, week_of
-- ORDER BY week_of, tools_in_category DESC;